<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-138987624-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-138987624-1');
    </script>


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="stylesheet" href="/media/css/all.css">
    <link rel="stylesheet" href="/media/css/profile.css">

    <title>MØIZZ</title>


  <!-- LeafletJS CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="">
  <link rel="stylesheet" href="/media/css/L.fullscreen.css" />
  <meta name="description" content="">
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
  <script src="/media/js/leaflet-heatmap.js"></script>
  <script src="/media/js/HamGridSquare.js"></script>
  <script src="/media/js/adif.js"></script>
  <script src="/media/js/chart.min.js"></script>

    <style>
      .header {
        text-align: center;
        vertical-align: middle;
        margin-bottom: 20px;
      }

      .navbar-dark a span {
        color: #212529 !important;
      }

      @media only screen and (min-width: 600px) {
        .header {
          background-image: url('/media/images/antennafield.jpg');
          background-position-x: 50%;
          background-position-y: 50%;
          background-size: 100%;
          display: block;
          background-attachment: fixed;
          color: white;
        }
        .navbar-dark {
          color: #fff;
        }

        .navbar-dark a span {
          color: #fff !important;
        }

        .header-text {
          padding-top: 100px;
          padding-bottom: 100px;
        }
      }



      section {
        padding-top: 10px;
      }

      footer {
        margin-top: 50px;
        padding-top: 20px;
        padding-bottom: 20px;

      }
    </style>

  </head>
  <body>
    <div class="container-fluid header">
      <div class="col-md-8 offset-md-2">
        <nav class="navbar navbar-expand-lg navbar-dark bg-transparent">
          <a class="navbar-brand" href="#">MØIZZ</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"><i class="fas fa-bars"></i></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                <a class="nav-link" href="/about.html">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/blog/">Blog</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/category/contests.html">Contest Reports</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/category/projects.html">Projects</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Tools
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/ogps/">OGPS</a>
                  <a class="dropdown-item" href="/morsechallenge/">Morse Challenge</a>
                  <!--
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#">Something else here</a>
                  -->
                </div>
              </li>
            </ul>
            <!--
            <form class="form-inline my-2 my-lg-0">
              <input id="searchCallsign" class="form-control mr-sm-2" type="search" placeholder="Search the Logbook" aria-label="Search">
              <button class="btn btn-outline-success my-2 my-sm-0" id="btnLogSearch">Search</button>
            </form>
            -->
          </div>
        </nav>

        <div class="header-text">
          <h1 class="display-1">  70cm UKAC February 2019
</h1>
          <h4 class="display-4"></h4>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="col-md-6 offset-md-2">
<section>
    <em class="text-muted">By Matt, 2E1HNK on <time datetime="2019-02-12">Tue, 12 Feb 2019</time></em>
  </section>

  <section>
    <div class="tags">
        <a class="btn btn-outline-secondary btn-sm" href="/blog/tags/UKAC.html">UKAC</a>
        <a class="btn btn-outline-secondary btn-sm" href="/blog/tags/Activation.html">Activation</a>
      <a class="btn btn-outline-secondary btn-sm" href="/blog/tags/IO91aw.html">IO91aw</a>
    </div>
  </section>

    <section>
      <center>
        <img class="img-fluid" style="margin-top: 20px; margin-bottom: 20px;" src="/media/images/2018-02-05-2m-UKAC.png" />
      </center>
    </section>


  <section>
        <p>This month I managed to take part in both the 2m and 70cm sections. The 2m section was my best (normalised) performance
to date (performance was actually down compared to January, but it was for everyone). Additionally I managed to scope out a slightly better site for future use, once I manage to get in touch with the land owner. The 70cm section was not great.</p>
<p>I was using my newly-constructed 7-element DK7ZB yagi which I
hadn't had a chance to test (or even tune) beforehand. Fortunately I had a borrowed Bird 43 wattmeter with me which
at least allowed me to do some basic tuning with. Having filed down the DE a bit to get the SWR as low as possible
I set up the mast and got going. Problems were obvious from the outset with strong stations such as G1YBB and G4ASR
being barely readable, and them not being able to hear me at all. After some investigation I discovered that in putting the mast up I had obviously put some strain on the N-connector on the yagi which had caused the centre pin to not connect with
the centre of the coax. It didn't help that I had to use an N connector that was for RG213 on my Ultraflex-7 coax. I considered
just calling it a night but realised that I had sufficient items to effect a field repair along the lines of 'take all
the connectors off and use electrical tape to make the connections'. Surprisingly, this actually worked quite well and
so I could get on and work the rest of the contest, albeit with a SWR of about 2.1:1.</p>
<h3>2m</h3>
<p>Section: AL</p>
<p>Total QSOs: 49</p>
<p>Total Points: 9,268 (4,768 + 4,500 bonus)</p>
<p>Normalised Points: 838</p>
<p>Position: 13/75</p>
<p>ODX: GM3SEK (IO74sr - 352km)</p>
<h3>70cm</h3>
<p>Section: AL</p>
<p>Total QSOs: 33</p>
<p>Total Points: 5,844 (2,344 + 3,500 bonus)</p>
<p>Normalised Points: 597</p>
<p>Position: 32/77</p>
<p>ODX: G3XDY (JO02ob - 218km)</p>
  </section>

        <section>
        <h2>Stats</h2>
        <div id="stats-">
  <p>Total QSOs: <span id="stats--totalqsos">?</span></p>
  <p>Total Points: <span id="stats--total">?</span> (<span id="stats--points">?</span> QSO points + <span id="stats--bonus">?</span> bonus points)</p>
  <p>ODX: <span id="stats--odx">?</span></p>
</div>

<script>
  var myLocation = [];
  gridSquareToLatLon("IO91aw", myLocation);

  readTextFile("/media/logs/2E1HNK_2019_02_12_432 MHz.adi", function(log) {
    totalQsos = 0;
    odxDist = 0;
    points = 0;
    bonusSquares = [];
    odx = "";
    for(var i=0; i<log.length; i++) {
      if ( log[i].latitude && log[i].longitude ) {
        if ( distBetweenLocations(myLocation.lat, myLocation.lon, log[i].latitude, log[i].longitude) > odxDist ) {
          odxDist = distBetweenLocations(myLocation.lat, myLocation.lon, log[i].latitude, log[i].longitude);
          odx = log[i].callsign + " (" + log[i].locator + ", " + Math.round(odxDist) + "km)"
        }
      }
      if ( !bonusSquares.includes(log[i].locator.substring(0,4)) ) {
        bonusSquares.push(log[i].locator.substring(0,4));
      }
      totalQsos++;
      points += log[i].points;
    }
    document.getElementById("stats--totalqsos").textContent = totalQsos;
    document.getElementById("stats--points").textContent = points;
    document.getElementById("stats--bonus").textContent = bonusSquares.length * 500;
    document.getElementById("stats--total").textContent = points + bonusSquares.length * 500;
    document.getElementById("stats--odx").textContent = odx;
  });
</script>


        <div id="container" style="width: 100%;">
  <canvas id="rateChart-" class="rate-chart"></canvas>
</div>
<div style="height: 450px" id="map-"></div>

<script src="/media/js/chartjs.plugin.annotation.js"></script>
<script src="/media/js/L.maidenheadcoloured.js"></script>
<script src="/media/js/L.fullscreen.js"></script>
<script>
  var myLocation = [];

  gridSquareToLatLon("IO91aw", myLocation);

  var osmLayer = L.tileLayer('//tileserver.eastus.cloudapp.azure.com/{id}/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery &copy; <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'ham'
  });

  var lightTiles = L.tileLayer('//cartodb-basemaps-{s}.global.ssl.fastly.net/{id}/{z}/{x}/{y}.png', {
    attribution: 'Map tiles by Carto, under CC BY 3.0. Data by <a href="//www.openstreetmap.org/">OpenStreetMap</a>, under ODbL.',
    maxZoom: 18,
    id: 'light_all'
  });

  var darkTiles = L.tileLayer('//cartodb-basemaps-{s}.global.ssl.fastly.net/{id}/{z}/{x}/{y}.png', {
    attribution: 'Map tiles by Carto, under CC BY 3.0. Data by <a href="//www.openstreetmap.org/">OpenStreetMap</a>, under ODbL.',
    maxZoom: 18,
    id: 'dark_all'
  });

  var portableIcon = L.icon({
    iconUrl: '/media/svg/portable.svg',
    iconSize:     [30, 30], // size of the icon
    iconAnchor:   [15, 15], // point of the icon which will correspond to marker's location
    popupAnchor:  [0, -30] // point from which the popup should open relative to the iconAnchor
  });

  var mobileIcon = L.icon({
    iconUrl: '/media/svg/mobile.svg',
    iconSize:     [30, 30], // size of the icon
    iconAnchor:   [15, 15], // point of the icon which will correspond to marker's location
    popupAnchor:  [0, -30] // point from which the popup should open relative to the iconAnchor
  });

  var baseIcon = L.icon({
    iconUrl: '/media/svg/base.svg',
    iconSize:     [30, 30], // size of the icon
    iconAnchor:   [15, 15], // point of the icon which will correspond to marker's location
    popupAnchor:  [0, -30] // point from which the popup should open relative to the iconAnchor
  });

  var myIcon = L.icon({
    iconUrl: '/media/svg/me-portable.svg',
    iconSize:     [30, 30], // size of the icon
    iconAnchor:   [15, 15], // point of the icon which will correspond to marker's location
    popupAnchor:  [0, -30]  // point from which the popup should open relative to the iconAnchor
  });

  var heatmapLayer = L.heatLayer([], {radius: 80, maxZoom: 16});

  var stationsLayer = L.featureGroup([]);

  var gridLayer = L.maidenhead({ worked: [], confirmed: [] });
  gridLayer._map = map;

  stationsLayer.addLayer(
    L.marker(
      [myLocation.lat, myLocation.lon],
      {icon: myIcon}
    ).bindPopup(
      "<b>IO91aw<br />"
    )
  );

  readTextFile("/media/logs/2E1HNK_2019_02_12_432 MHz.adi", function(log) {
    rate = {};
    opmode = [];
    var currMode = "s_p";
    var lastRunStart = "";

    rateGroupInterval = 5;   // Interval (in minutes) to group QSOs for the rate graph

    for(var i=0; i<log.length; i++) {
      if ( log[i].latitude && log[i].longitude ) {
        var added = false;
        for ( var j=0; j<heatmapLayer._latlngs.length; j++ ) {
          if ( heatmapLayer._latlngs[j][0] == log[i].latitude && heatmapLayer._latlngs[j][1] == log[i].longitude ) {
            var count = heatmapLayer._latlngs[j][2] + 1;
            console.log("In heatmap, setting count to " + count);
            heatmapLayer._latlngs[j] = [log[i].latitude, log[i].longitude, count];
            added = true;
          }
        }
        if ( !added ) {
          heatmapLayer.addLatLng([log[i].latitude, log[i].longitude, 1]);
        }

        console.log(heatmapLayer);
        if ( log[i].callsign.endsWith("/P") ) {
          var iconType = portableIcon;
        } else if ( log[i].callsign.endsWith("/M") ) {
          var iconType = mobileIcon;
        } else {
          var iconType = baseIcon;
        }
          stationsLayer.addLayer(
            L.marker(
              [log[i].latitude, log[i].longitude],
              {icon: iconType}
            ).bindPopup(
              "<table>" +
              "<tr><th colspan=2><b>" + log[i].callsign + "</b></th></tr>" +
              "<tr><th>Locator:</th><td>" + log[i].locator + "</td></tr>" +
              "<tr><th>Date:</th><td>" + log[i].date.substr(0,4) + "-" + log[i].date.substr(4,2) + "-" + log[i].date.substr(6,2) + "</td></tr>" +
              "<tr><th>Time:</th><td>" + log[i].time.substr(0,2) +":" + log[i].time.substr(2,2) + "</td></tr>" +
              "<tr><th>TX:</th><td>" + log[i].rst_tx + " / " + log[i].serial_tx + "</td></tr>" +
              "<tr><th>RX:</th><td>" + log[i].rst_rx + " / " + log[i].serial_rx + "</td></tr>" +
              "</table>"
            )
          );
      } else if ( log[i].locator ) {
        latlng = gridSquareToLatLon(log[i].locator, log[i]);
        heatmapLayer.addLatLng([log[i].lat, log[i].lon, 1]);
      }

      // Add to grid shading
      if ( log[i].locator ) {
        gridLayer.grids.worked.push(log[i].locator);
      }
      gridLayer.redraw();

      // Add QSO to rate object
      rateKey = log[i].date + " " + Math.floor(parseInt(log[i].time) / rateGroupInterval) * rateGroupInterval;
      rateKey in rate ? rate[rateKey]++ : rate[rateKey] = 1;

      // Work out if we were running or S&P
      if ( i > 1 && i < (log.length-1) ) {
        if ( log[i].frequency == log[i+1].frequency || log[i].frequency == log[i-1].frequency ) {
          // in run mode
          if (currMode == "s_p") {
            // Start a new run session
            lastRunStart = log[i].date + " " + log[i].time;
            currMode = "run";
          } // else still running
        } else {
          if (currMode == "run") {
            // End a run session
            opmode.push([lastRunStart, log[i].date + " " + log[i].time]);
            currMode = "s_p";
          } // else still s_p
        }
      }
    }

    map.fitBounds(stationsLayer.getBounds().pad(0.5));

    console.log("rate", rate);

    var chartData = {
      labels: Object.keys(rate),
      datasets: [{
        label: "QSOs per " + rateGroupInterval + " mins",
        backgroundColor: '#5695c8',
				borderColor: '#31517a',
				borderWidth: 1,
        fill: false,
				data: Object.values(rate)
      },{
        label: "",
        backgroundColor: '#5695c8',
				borderColor: '#31517a',
				borderWidth: 1,
        fill: false,
				data: opmode
      }]
    };

    console.log("chartData", chartData);


    // Draw the rate chart
    //window.onload = function() {
      var ctx = document.getElementById('rateChart-').getContext('2d');
      window.rateBarChart = new Chart(ctx, {
        type: 'line',
        data: chartData,
        options: {
          responsive: true,
          run_periods: opmode,
          chartArea: {
            backgroundColor: 'rgba(251, 85, 85, 0.4)'
          },
          legend: {
            position: 'top',
          },
          title: {
            display: true,
            text: ' Rate Chart'
          },
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true
              }
            }]
          }
        },
        plugins: {
          annotation: {
            drawTime: 'afterDatasetsDraw',
            annotations: [{
      				id: 'a-line-1', // optional
      				type: 'line',
      				mode: 'horizontal',
      				scaleID: 'y-axis-0',
      				value: '2',
      				borderColor: 'red',
      				borderWidth: 2,

      				// Fires when the user clicks this annotation on the chart
      				// (be sure to enable the event in the events array below).
      				onClick: function(e) {
      					// `this` is bound to the annotation element
      				}
      			}]
          }
        }
      });
      console.log("rate chart", window.rateBarChart);
    //};
  });

  heatmapLayer.redraw();

  var basemaps = {"OpenStreetMap": osmLayer, "Carto Light": lightTiles, "Carto Dark": darkTiles};
  var overlayMaps = {"Grid": gridLayer, "Heatmap": heatmapLayer, "Stations": stationsLayer};

  var map = new L.map('map-', {
    zoom: 6,
    attributionControl: true,
    fullscreenControl: true,
    layers: [lightTiles, heatmapLayer, gridLayer, stationsLayer]
  });
  //map.setView([51.945732, -1.926986], 6);
  map.fitBounds(stationsLayer.getBounds().pad(0.5));

  L.control.layers(basemaps, overlayMaps).addTo(map);

</script>


        </section>
        </div>
        <div class="col-md-2 offset-md-1">
          <div class="profile-sidebar">
    				<!-- SIDEBAR USERPIC -->
    				<div class="profile-userpic ">
    					<img src="https://pbs.twimg.com/profile_images/1196769278042742785/3PtAfM-f_400x400.jpg" class="img-responsive mx-auto d-block" alt="">
    				</div>
    				<!-- END SIDEBAR USERPIC -->
    				<!-- SIDEBAR USER TITLE -->
    				<div class="profile-usertitle">
    					<div class="profile-usertitle-name">
    						Matt
    					</div>
    					<div class="profile-usertitle-job">
    						MØIZZ, 2E1HNK
    					</div>
    				</div>
    				<!-- END SIDEBAR USER TITLE -->
    				<!-- SIDEBAR BUTTONS -->
            <!--
    				<div class="profile-userbuttons">
    					<button type="button" class="btn btn-success btn-sm">Follow</button>
    					<button type="button" class="btn btn-danger btn-sm">Message</button>
    				</div>
          -->
    				<!-- END SIDEBAR BUTTONS -->
    				<!-- SIDEBAR MENU -->
            <!--
    				<div class="profile-usermenu">
    					<ul class="nav">
    						<li class="active">
    							<a href="#">
    							<i class="glyphicon glyphicon-home"></i>
    							Overview </a>
    						</li>
    						<li>
    							<a href="#">
    							<i class="glyphicon glyphicon-user"></i>
    							Account Settings </a>
    						</li>
    						<li>
    							<a href="#" target="_blank">
    							<i class="glyphicon glyphicon-ok"></i>
    							Tasks </a>
    						</li>
    						<li>
    							<a href="#">
    							<i class="glyphicon glyphicon-flag"></i>
    							Help </a>
    						</li>
    					</ul>
    				</div>
          -->
    				<!-- END MENU -->
    			</div>

          <a class="twitter-timeline" href="https://twitter.com/m0izz_matt" data-tweet-limit="5" data-width="399" ></a>
          <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        </div>
      </div>
    </div>


    <footer class="bg-dark">
      <div class="container">
        <div class="row">
          <div class="col-md-2 offset-md-2 text-center">
            <a href="https://qrz.com/db/m0izz"><img src="/media/images/qrz.png" class="img-fluid" style="max-height: 56px;"/></a>
          </div>

          <div class="col-md-2 text-center">
            <a href="https://twitter.com/m0izz_matt"><i class="fab fa-twitter display-4 text-light"></i></a>
          </div>
          <div class="col-md-2 text-center">
            <a href="https://github.com/2e1hnk"><i class="fab fa-github display-4 text-light"></i></a>
          </div>
          <div class="col-md-2 text-center">
            <a href="https://reddit.com/user/2e1hnk"><i class="fab fa-reddit display-4 text-light"></i></a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script type="text/javascript">
        document.getElementById("btnLogSearch").onclick = function () {
            var url = "/logsearch.html?callsign=" + document.getElementById("searchCallsign").value;
            location.href(url);
            return false;
        };
    </script>
  </body>
</html>